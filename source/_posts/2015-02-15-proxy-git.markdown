---
layout: post
title: "使用goagent代理git"
date: 2015-02-15 22:07:45 +0800
comments: true
categories: git
---
环境 archlinux + zsh  

git直连的时候也不是不能正常工作，就是特慢，实在不能忍。。。  
以下为代理方法,直接加入到.zshrc：

    # 设定http和https代理，指向GoAgent
    # 这个设置会同时影响到 curl wget rvm gem bundle
    export http_proxy='http://127.0.0.1:8087'
    export https_proxy=$http_proxy
    # 让git clone时忽略SSL错误
    export GIT_SSL_NO_VERIFY=true

当然，不用上面的全局方法，只让git通过代理也是可以的。

    git config --global http.proxy http://127.0.0.1:8087

以下运行一次~

    # git的全局设定，关闭ssl验证
    git config --global http.sslVerify false

用全局代理的话，完了之后 yaourt -S xxx 会出现 curl 证书错误  
修正方法：

    # 让curl永久忽略SSL错误
    echo insecure >> ~/.curlrc

我这样做却无效。。。  
google之后发现还是要手动装证书= =

    ca-certificates update
    https://www.archlinux.org/news/ca-certificates-update/

archlinux 2014-12-11之后ca的安装方法改变了  
[链接](https://www.archlinux.org/news/ca-certificates-update/)

以下新的安装方法：

    复制 goagent/local/CA.crt /etc/ca-certificates/trust-source/anchors/
    运行 trust extract-compat

然后 curl 就ok了~  


啊，rake gen_deploy 飞速~
